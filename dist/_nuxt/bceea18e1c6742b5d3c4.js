(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{315:function(e,t,r){var content=r(320);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(90).default)("15e87b4b",content,!0,{sourceMap:!1})},319:function(e,t,r){"use strict";r(315)},320:function(e,t,r){(t=r(89)(!1)).push([e.i,".brand[data-v-6eb429e7]{color:#3c4f65;text-align:left;margin-bottom:20px;margin-top:35px}.field[data-v-6eb429e7]{margin-bottom:16px}",""]),e.exports=t},325:function(e,t,r){"use strict";r.r(t);r(25);var n,o=r(2),l={data:function(){var e=this;return{users:[],select:[],register_show:!1,permission_option:[{label:"dang_kiem",text:"Tra cứu Đăng kiểm"},{label:"thong_tin_chu_so_huu",text:"Thông tin chủ sở hữu"},{label:"export_file",text:"Export File"},{label:"up_bks",text:"Upload biển kiểm soát"}],formData:{username:"",password:"",repassword:"",permission:[]},level:[],loading:!1,register_form:{username:[{type:"string",required:!0,message:"Quý khách được yêu cầu nhập Tên đăng nhập."}],password:[{validator:function(t,r,n){""===r?n(new Error("Quý khách được yêu cầu nhập mật khẩu.")):(""!==e.formData.repassword&&e.$refs.register.validateField("repassword"),n())},type:"string",required:!0}],repassword:[{validator:function(t,r,n){""===r?n(new Error("Quý khách được yêu cầu nhập lại mật khẩu.")):r!==e.formData.password?n(new Error("Mật khẩu nhập lại không trùng khớp.")):n()},type:"string",required:!0}]}}},created:(n=Object(o.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.post("/api/account/permission/admin");case 2:if(!e.sent.data.error){e.next=7;break}this.$router.push("/"),e.next=12;break;case 7:return e.next=9,this.$axios.get("/api/account");case 9:t=e.sent,data=t.data,this.users=data;case 12:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),methods:{register:function(){var e=this;e.loading=!0,this.$refs.register.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(r){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,e.$axios.post("/api/account/register",e.formData);case 3:n=t.sent,(data=n.data).id?(e.register_show=!1,e.$message({type:"success",message:"Đăng kí thành công !"}),e.users.push(data)):e.$message({type:"error",message:data.error}),t.next=9;break;case 8:return t.abrupt("return",!1);case 9:e.loading=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},remove_user:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$axios.delete("/api/account/"+e);case 2:n=r.sent,n.data,t.users=t.users.filter((function(t){return t.id!==e})),t.$message({type:"warning",message:"Tài khoản đã được loại bỏ."});case 6:case"end":return r.stop()}}),r)})))()},update_permission:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$axios.post("/api/account/permission/update",{id_user:e.id,permission:e.permission});case 2:n=r.sent,"OK"===(data=n.data)?t.$message({type:"success",message:"Đã update thành công !"}):data.error&&t.$message({type:"error",message:data.error});case 5:case"end":return r.stop()}}),r)})))()}}},c=(r(319),r(39)),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",[r("el-col",{attrs:{span:24,offset:0}},[r("el-row",[r("el-col",{attrs:{align:"right",span:3,offset:21}},[r("el-button",{attrs:{type:"primary",icon:"",loading:!1,plain:!1,round:!1,circle:!1,autofocus:!1,size:"mini",disabled:!1},on:{click:function(t){e.register_show=!0}}},[e._v("Tạo Tài Khoản")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"Đăng kí Thành viên",visible:e.register_show,center:!0,fullscreen:!0},on:{"update:visible":function(t){e.register_show=t}}},[r("transition",{attrs:{name:"el-zoom-in-center"}},[r("div",{staticClass:"transition-box"},[r("el-col",{attrs:{span:6,offset:9}},[r("center",[e._v("\n\t\t\t\t\t\t\tTạo tài khoản\n\t\t\t\t\t\t")]),e._v(" "),r("el-form",{ref:"register",attrs:{rules:e.register_form,model:e.formData,"status-icon":"","label-width":"auto","label-position":"top",inline:!1,disabled:!1,"inline-message":!1,"show-message":"","validate-on-rule-change":"",size:"medium"}},[r("el-form-item",{staticClass:"field",attrs:{label:"Tên đăng nhập",prop:"username",align:"left"}},[r("el-input",{attrs:{placeholder:"Viết liền không dấu",size:"medium",clearable:"",type:"text",autosize:!1,disabled:!1,autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)}},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1),e._v(" "),r("el-form-item",{staticClass:"field",attrs:{label:"Mật khẩu",prop:"password",align:"left"}},[r("el-input",{attrs:{placeholder:"Nhập mật khẩu",size:"medium","show-password":"",disabled:!1,autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)}},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),e._v(" "),r("el-form-item",{staticClass:"field",attrs:{label:"Nhập lại mật khẩu",prop:"repassword",align:"left"}},[r("el-input",{attrs:{placeholder:"Nhập lại mật khẩu",size:"medium","show-password":"",disabled:!1,autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)}},model:{value:e.formData.repassword,callback:function(t){e.$set(e.formData,"repassword",t)},expression:"formData.repassword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Cấp quyền",prop:"permission",align:"left"}},[r("el-checkbox-group",{model:{value:e.formData.permission,callback:function(t){e.$set(e.formData,"permission",t)},expression:"formData.permission"}},e._l(e.permission_option,(function(t,n){var label=t.label,text=t.text;return r("el-checkbox",{key:n,attrs:{label:label,border:!1}},[e._v(e._s(text))])})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:".",align:"center"}},[r("el-button",{on:{click:function(t){e.register_show=!1}}},[e._v("Cancel")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.register}},[e._v("Đăng kí")])],1),e._v(" "),r("br"),e._v(" "),r("br"),e._v("\n\t\t\t\t\t\t\t(*) Admin cấp quyền cho thành viên truy cập vào hệ thống\n\n\t\t\t\t\t\t")],1)],1)],1)])],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24,offset:0}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users,height:"500",border:!1,"highlight-current-row":!1,stripe:!1,lazy:!1,"show-summary":!1,"tooltip-effect":"light"}},[r("el-table-column",{attrs:{type:"index",align:"left",sortable:!1,fixed:!1,width:"90"}}),e._v(" "),r("el-table-column",{attrs:{label:"Username",prop:"username",align:"left",sortable:!1,fixed:!1,width:"220"}}),e._v(" "),r("el-table-column",{attrs:{label:"Tính năng",align:"left",sortable:!1,fixed:!1,width:"650"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-checkbox-group",{on:{change:function(r){return e.update_permission(t.row)}},model:{value:t.row.permission,callback:function(r){e.$set(t.row,"permission",r)},expression:"scope.row.permission"}},e._l(e.permission_option,(function(n,o){var label=n.label,text=n.text;return r("el-checkbox",{key:o,attrs:{label:label,border:!1,disabled:"admin"===t.row.username}},[e._v(e._s(text))])})),1)]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"right",sortable:!1,fixed:!1,width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popconfirm",{attrs:{title:"Bạn có chắc chắn?",confirmButtonText:"OK",cancelButtonText:"Không,cảm ơn.",icon:"el-icon-info",iconColor:"red"},on:{onConfirm:function(r){return e.remove_user(t.row.id)}}},[r("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete-solid",loading:!1,plain:!1,round:!1,circle:!1,autofocus:!1,size:"mini",disabled:!1},slot:"reference"})],1)]}}])})],1)],1)],1)],1)],1)}),[],!1,null,"6eb429e7",null);t.default=component.exports}}]);